---
permalink: http-context
title: 介绍
category: HTTP生命周期
---
= 介绍

toc::[]

AdonisJs主要是一个处理HTTP协议的Web框架。在本指南中，我们将学习AdonisJs如何通过注册路由和中间件来处理HTTP请求

== 请求流程
以下是关于HTTP请求流如何工作的流程图 +
link:http://res.cloudinary.com/adonisjs/image/upload/q_100/v1502383746/Adonis-Http-Request-Flow_grqcfd.jpg[image:http://res.cloudinary.com/adonisjs/image/upload/q_100/v1502383746/Adonis-Http-Request-Flow_grqcfd.jpg[width="400px"], window="_blank"]

[ol-spaced]
1. 服务器级中间件堆栈包含一个中间件，用于提供 `public` 目录中的静态资源。即使没有注册当前URL的路由，也应该在需要执行时添加服务器级中间件。
2. 如果请求不被服务器级中间件拦截，那么AdonisJs将查找已注册的路由，如果找到路由，则会执行全局的，已命名的中间件和路由操作。
3. 否则，会抛出404异常。

== Http上下文
由于Node.js同时处理HTTP请求，因此每个请求都需要进行唯一标识和管理。 AdonisJs将 *Context* 对象传递给所有路由处理程序，此对象包含处理HTTP请求所需的所有内容。

因此，当你将一个处理程序绑定到 `Route` 时，该处理程序将针对与该URL匹配的每个请求执行，并接收唯一的 `context` 实例。

[source, js]
----
Route.get('/', (ctx) => { 
  // ctx.request
  // ctx.response
})
----

或者，您可以使用ES6解构。

[source, js]
----
Route.get('/', ({ request, response }) => {
  // request
  // response
})
----

上下文对象的最好的部分是你可以从中获取更多的对象。例如：`auth` ， `view` 等

== 公共目录
注册应用程序根目录中的 `public` 目录来提供静态资源，如 *css*，*图片* 和 *字体* 等。

该目录内的所有文件都可以公开使用，不需要任何认证或限制。

== 视图
有几种方法可以使用视图，并且了解它们之间的区别非常重要。一种方法是提供者导入 *视图* ，另一种方法是使用HTTP特定的视图实例。

=== 手动导入
[source, js]
----
const View = use('View')

// render view
const html = View.render('home', {})
----

=== Http视图实例
[source, js]
----
Route.get('/', async ({ view }) => {
  return view.render('home')
})
----

根本区别在于，HTTP视图实例包含一系列请求特定的本地变量，如 *请求*，*经过认证的用户* 等。

因此，请始终确保在请求生命周期中使用HTTP视图实例。
